<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø¹Ù…Ø§Ø¯ ÙƒØ§Ø¸Ù… Ø§Ù„Ø´Ø§Ù…Ù„Ø© | MARC21 & RDA Full Lab</title>
    
    <!-- External Library for Excel Export -->
    <script src="https://cdn.jsdelivr.net"></script>

    <style>
        :root { 
            --primary: #2563eb; --secondary: #64748b; 
            --success: #16a34a; --bg: #f1f5f9; 
            --card-bg: #ffffff; --text: #1e293b;
            --accent: #3b82f6;
        }
        
        body { font-family: 'Segoe UI', system-ui, Tahoma; background: var(--bg); color: var(--text); padding: 20px; line-height: 1.6; }
        .container { max-width: 1200px; margin: auto; }
        
        /* Header Section */
        .header { text-align: center; margin-bottom: 30px; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); border: 1px solid #e2e8f0; }
        .header h1 { margin: 0; color: var(--primary); font-size: 1.8rem; }
        .header p { margin: 10px 0 0; color: var(--secondary); font-size: 1rem; }

        /* Quick Load Buttons */
        .training-modes { display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; margin-bottom: 30px; }
        .btn-mode { padding: 10px 22px; border: 2px solid var(--primary); background: white; color: var(--primary); border-radius: 12px; cursor: pointer; font-weight: 600; transition: all 0.3s; display: flex; align-items: center; gap: 8px; }
        .btn-mode:hover { background: var(--primary); color: white; transform: translateY(-2px); }
        .btn-clear { border-color: #ef4444; color: #ef4444; }
        .btn-clear:hover { background: #ef4444; color: white; }

        /* Grid & Cards */
        .marc-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(360px, 1fr)); gap: 20px; }
        .card { background: var(--card-bg); padding: 22px; border-radius: 18px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); border: 1px solid #e2e8f0; transition: 0.3s; }
        .card:hover { border-color: var(--primary); }
        .card-title { background: #f8fafc; margin: -22px -22px 20px -22px; padding: 15px 22px; border-radius: 18px 18px 0 0; font-size: 0.95rem; font-weight: bold; color: var(--primary); border-bottom: 1px solid #e2e8f0; display: flex; justify-content: space-between; align-items: center; }

        /* Form Inputs */
        .field-row { margin-bottom: 18px; }
        .label-box { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
        label { font-size: 0.85rem; font-weight: 700; color: var(--secondary); display: flex; align-items: center; }
        .tag-num { background: #dbeafe; color: #1e40af; padding: 2px 8px; border-radius: 6px; font-family: 'Courier New', monospace; margin-left: 8px; font-weight: bold; font-size: 0.9rem; }
        
        /* Interactive Help Bubble */
        .help-link { 
            background: #f1f5f9; color: var(--primary); 
            width: 24px; height: 24px; border-radius: 50%; 
            display: inline-flex; align-items: center; justify-content: center; 
            text-decoration: none; font-size: 13px; font-weight: bold; 
            border: 1px solid #e2e8f0; transition: 0.2s;
        }
        .help-link:hover { background: var(--primary); color: white; border-color: var(--primary); transform: rotate(15px) scale(1.1); }

        input { width: 100%; padding: 11px 14px; border: 1px solid #cbd5e1; border-radius: 10px; box-sizing: border-box; font-size: 0.95rem; transition: 0.2s; }
        input:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 0 4px rgba(37,99,235,0.1); background: white; }
        
        /* Main Action Buttons */
        .actions { text-align: center; margin: 40px 0; display: flex; justify-content: center; gap: 20px; }
        .btn-main { padding: 15px 45px; border: none; border-radius: 14px; color: white; cursor: pointer; font-weight: 700; font-size: 1.1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: 0.2s; }
        .btn-main:hover { transform: scale(1.03); opacity: 0.95; }

        /* Dark Terminal Output */
        .output-container { background: #0f172a; color: #38bdf8; padding: 30px; border-radius: 20px; font-family: 'Consolas', 'Courier New', monospace; border: 2px solid #1e293b; box-shadow: inset 0 2px 4px rgba(0,0,0,0.3); }
        .output-header { display: flex; justify-content: space-between; color: #94a3b8; font-size: 0.85rem; margin-bottom: 15px; border-bottom: 1px solid #1e293b; padding-bottom: 10px; }
        pre { margin: 0; white-space: pre-wrap; font-size: 1.05rem; line-height: 1.6; }
    </style>
</head>
<body>

<div class="container">
    <!-- Header -->
    <div class="header">
        <h1>ğŸ“š Ù…Ù†ØµØ© Ø¹Ù…Ø§Ø¯ ÙƒØ§Ø¸Ù… Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù„Ù„ÙÙ‡Ø±Ø³Ø©</h1>
        <p>Ø§Ù„Ù…Ø®ØªØ¨Ø± Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„: MARC21 + RDA + Ø§Ù„Ø±Ø¨Ø· Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¨Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©</p>
    </div>

    <!-- Mode Selectors -->
    <div class="training-modes">
        <button class="btn-mode" onclick="loadSample('book')">ğŸ“– ÙƒØªØ§Ø¨ Ù…Ø¹ Ø³Ù„Ø³Ù„Ø©</button>
        <button class="btn-mode" onclick="loadSample('thesis')">ğŸ“ Ø£Ø·Ø±ÙˆØ­Ø© Ø¹Ù„Ù…ÙŠØ©</button>
        <button class="btn-mode" onclick="loadSample('electronic')">ğŸŒ Ù…ÙˆØ±Ø¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</button>
        <button class="btn-mode btn-clear" onclick="clearForm()">ğŸ§¹ Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
    </div>

    <!-- Dynamic Form -->
    <form id="marcForm">
        <div class="marc-grid">
            
            <!-- Category 1: Identifiers -->
            <div class="card">
                <div class="card-title">Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªÙ‚Ù†ÙŠÙ† ÙˆØ§Ù„ØªØµÙ†ÙŠÙ <span>(0xx)</span></div>
                <div class="field-row" data-tag="020">
                    <div class="label-box">
                        <label><span class="tag-num">020</span> Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹ÙŠØ§Ø±ÙŠ ISBN</label>
                        <a href="https://www.bibalex.org" target="_blank" class="help-link" title="Ø´Ø±Ø­ Ø­Ù‚Ù„ 020">ØŸ</a>
                    </div>
                    <input placeholder="Ù…Ø«Ø§Ù„: 9789921712001">
                </div>
                <div class="field-row" data-tag="082">
                    <div class="label-box">
                        <label><span class="tag-num">082</span> ØªØµÙ†ÙŠÙ Ø¯ÙŠÙˆÙŠ Ø§Ù„Ø¹Ø´Ø±ÙŠ</label>
                        <a href="https://www.bibalex.org" target="_blank" class="help-link" title="Ø´Ø±Ø­ Ø­Ù‚Ù„ 082">ØŸ</a>
                    </div>
                    <input placeholder="Ù…Ø«Ø§Ù„: 025.3">
                </div>
                <div class="field-row" data-tag="050">
                    <div class="label-box">
                        <label><span class="tag-num">050</span> ØªØµÙ†ÙŠÙ Ø§Ù„ÙƒÙˆÙ†Ø¬Ø±Ø³</label>
                        <a href="https://www.bibalex.org" target="_blank" class="help-link" title="Ø´Ø±Ø­ Ø­Ù‚Ù„ 050">ØŸ</a>
                    </div>
                    <input placeholder="Ù…Ø«Ø§Ù„: Z663.12 .C65">
                </div>
            </div>

            <!-- Category 2: Title & Series -->
            <div class="card">
                <div class="card-title">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© ÙˆØ§Ù„Ø³Ù„Ø³Ù„Ø© <span>(1xx-4xx)</span></div>
                <div class="field-row" data-tag="100">
                    <div class="label-box">
                        <label><span class="tag-num">100</span> Ø§Ù„Ù…Ø¤Ù„Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</label>
                        <a href="https://www.bibalex.org" target="_blank" class="help-link" title="Ø´Ø±Ø­ Ø­Ù‚Ù„ 100">ØŸ</a>
                    </div>
                    <input placeholder="Ø§Ù„Ù„Ù‚Ø¨ØŒ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„">
                </div>
                <div class="field-row" data-tag="245">
                    <div class="label-box">
                        <label><span class="tag-num">245</span> Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©</label>
                        <a href="https://www.bibalex.org" target="_blank" class="help-link" title="Ø´Ø±Ø­ Ø­Ù‚Ù„ 245">ØŸ</a>
                    </div>
                    <input placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ : Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ±Ø¹ÙŠ / Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©">
                </div>
                <div class="field-row" data-tag="490">
                    <div class="label-box">
                        <label><span class="tag-num">490</span> Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ù„Ø³Ù„Ø© (Series)</label>
                        <a href="https://www.bibalex.org" target="_blank" class="help-link" title="Ø´Ø±Ø­ Ø­Ù‚Ù„ 490">ØŸ</a>
                    </div>
                    <input placeholder="Ø§Ø³Ù… Ø§Ù„Ø³Ù„Ø³Ù„Ø© Ø› Ø±Ù‚Ù… Ø§Ù„Ù…Ø¬Ù„Ø¯">
                </div>
            </div>

            <!-- Category 3: RDA Fields -->
            <div class="card">
                <div class="card-title">Ø§Ù„ÙˆØµÙ Ø§Ù„Ù…Ø§Ø¯ÙŠ (RDA) <span>(3xx)</span></div>
                <div class="field-row" data-tag="300">
                    <div class="label-box">
                        <label><span class="tag-num">300</span> Ø§Ù„ÙˆØµÙ Ø§Ù„Ù…Ø§Ø¯ÙŠ</label>
                        <a href="https://www.bibalex.org" target="_blank" class="help-link" title="Ø´Ø±Ø­ Ø­Ù‚Ù„ 300">ØŸ</a>
                    </div>
                    <input placeholder="Ù…Ø«Ø§Ù„: 250 Øµ Ø› 24 Ø³Ù…">
                </div>
                <div class="field-row" data-tag="336">
                    <div class="label-box">
                        <label><span class="tag-num">336</span> Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ (Content)</label>
                        <a href="https://www.bibalex.org" target="_blank" class="help-link" title="Ø´Ø±Ø­ Ø­Ù‚Ù„ 336">ØŸ</a>
                    </div>
                    <input value="Ù†Øµ (text)">
                </div>
                <div class="field-row" data-tag="338">
                    <div class="label-box">
                        <label><span class="tag-num">338</span> Ù†ÙˆØ¹ Ø§Ù„Ù†Ø§Ù‚Ù„ (Carrier)</label>
                        <a href="https://www.bibalex.org" target="_blank" class="help-link" title="Ø´Ø±Ø­ Ø­Ù‚Ù„ 338">ØŸ</a>
                    </div>
                    <input value="Ù…Ø¬Ù„Ø¯ (volume)">
                </div>
            </div>

            <!-- Category 4: Notes & URL -->
            <div class="card">
                <div class="card-title">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø±Ù‚Ù…ÙŠ <span>(5xx-8xx)</span></div>
                <div class="field-row" data-tag="500">
                    <div class="label-box">
                        <label><span class="tag-num">500</span> Ù…Ù„Ø§Ø­Ø¸Ø© Ø¹Ø§Ù…Ø©</label>
                        <a href="https://www.bibalex.org" target="_blank" class="help-link" title="Ø´Ø±Ø­ Ø­Ù‚Ù„ 500">ØŸ</a>
                    </div>
                    <input placeholder="ÙƒØ´Ø§ÙØ§ØªØŒ Ø¨Ø¨Ù„ÙŠÙˆØ¬Ø±Ø§ÙÙŠØ©ØŒ Ø¥Ù„Ø®.">
                </div>
                <div class="field-row" data-tag="502">
                    <div class="label-box">
                        <label><span class="tag-num">502</span> Ù…Ù„Ø§Ø­Ø¸Ø© Ø£Ø·Ø±ÙˆØ­Ø©</label>
                        <a href="https://www.bibalex.org" target="_blank" class="help-link" title="Ø´Ø±Ø­ Ø­Ù‚Ù„ 502">ØŸ</a>
                    </div>
                    <input placeholder="Ù†ÙˆØ¹ Ø§Ù„Ø±Ø³Ø§Ù„Ø©ØŒ Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©ØŒ Ø§Ù„Ø³Ù†Ø©">
                </div>
                <div class="field-row" data-tag="856">
                    <div class="label-box">
                        <label><span class="tag-num">856</span> Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (URL)</label>
                        <a href="https://www.bibalex.org" target="_blank" class="help-link" title="Ø´Ø±Ø­ Ø­Ù‚Ù„ 856">ØŸ</a>
                    </div>
                    <input placeholder="http://example.com/document.pdf" style="direction: ltr;">
                </div>
            </div>

        </div>
    </form>

    <!-- Global Actions -->
    <div class="actions">
        <button onclick="updateDisplay()" class="btn-main" style="background:var(--primary)">ğŸ”„ ØªÙˆÙ„ÙŠØ¯ Ø³Ø¬Ù„ MARC21</button>
        <button onclick="exportExcel()" class="btn-main" style="background:var(--success)">ğŸ“Š ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel</button>
    </div>

    <!-- Output View -->
    <div class="output-container">
        <div class="output-header">
            <span>Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¬Ù„ Ø¨ØµÙŠØºØ© Ù…Ø§Ø±Ùƒ 21 (Record View)</span>
            <span style="color: #4ade80;">â— Active Lab</span>
        </div>
        <pre id="marcDisplay">LDR 00000nam a2200000 i 4500</pre>
    </div>
</div>

<script>
    // Logic to update the MARC display area
    function updateDisplay() {
        let text = "LDR 00000nam a2200000 i 4500\n";
        document.querySelectorAll('.field-row').forEach(row => {
            const tag = row.dataset.tag;
            const val = row.querySelector('input').value;
            if(val) {
                let ind = "##";
                // Smart Indicators for training
                if(tag === "100") ind = "1#";
                if(tag === "245") ind = "10";
                if(tag === "082") ind = "04";
                if(tag === "856") ind = "40";
                
                text += `${tag} ${ind} $a ${val}\n`;
            }
        });
        document.getElementById('marcDisplay').innerText = text;
    }

    // Logic to clear all inputs except RDA defaults
    function clearForm() {
        document.querySelectorAll('input').forEach(i => {
            if(!["336","338"].includes(i.closest('.field-row').dataset.tag)) {
                i.value = '';
            }
        });
        updateDisplay();
    }

    // Logic to load samples for training
    function loadSample(type) {
        clearForm();
        const samples = {
            book: {
                "020": "978-9921-712-00-1", "082": "025.3", "100": "ÙƒØ§Ø¸Ù…ØŒ Ø¹Ù…Ø§Ø¯", 
                "245": "Ø§Ù„ÙÙ‡Ø±Ø³Ø© Ø§Ù„Ø¢Ù„ÙŠØ© ÙÙŠ Ø¸Ù„ RDA", "490": "Ø³Ù„Ø³Ù„Ø© ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø› 5",
                "300": "180 Øµ Ø› 24 Ø³Ù…", "500": "ÙŠØ´ØªÙ…Ù„ Ø¹Ù„Ù‰ ÙƒØ´Ø§ÙØ§Øª ÙˆØ¨Ø¨Ù„ÙŠÙˆØ¬Ø±Ø§ÙÙŠØ©."
            },
            thesis: {
                "100": "Ø§Ù„Ø®Ù„ÙØŒ ØµØ§Ù„Ø­", "245": "Ø£Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙÙŠ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©", 
                "502": "Ø£Ø·Ø±ÙˆØ­Ø© Ø¯ÙƒØªÙˆØ±Ø§Ù‡ - Ø¬Ø§Ù…Ø¹Ø© Ø¨ØºØ¯Ø§Ø¯ - 2023", "856": "http://ir.uobaghdad.edu.iq"
            },
            electronic: {
                "245": "Ù…Ø¬Ù„Ø© Ø¯Ø±Ø§Ø³Ø§Øª Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª [Ù…ÙˆØ±Ø¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ]", "336": "Ù†Øµ (text)", 
                "338": "Ù…ÙˆØ±Ø¯ Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª (online resource)", "856": "https://arab-journal.org"
            }
        };
        const data = samples[type];
        Object.keys(data).forEach(tag => {
            const input = document.querySelector(`[data-tag="${tag}"] input`);
            if(input) input.value = data[tag];
        });
        updateDisplay();
    }

    // Logic to export form data to an Excel sheet
    function exportExcel() {
        let rows = [["Ø§Ù„Ø­Ù‚Ù„ (Tag)", "Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª", "Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Data)"]];
        document.querySelectorAll('.field-row').forEach(row => {
            const val = row.querySelector('input').value;
            if(val) rows.push([row.dataset.tag, "##", val]);
        });
        const ws = XLSX.utils.aoa_to_sheet(rows);
        const wb = XLSX.utils.book_new();
        XLSX.utils.book_append_sheet(wb, ws, "MARC_RDA");
        XLSX.writeFile(wb, "Emad_Kazem_Full_Lab.xlsx");
    }
</script>

</body>
</html>
