<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø¹Ù…Ø§Ø¯ ÙƒØ§Ø¸Ù… Ø§Ù„Ø´Ø§Ù…Ù„Ø© | MARC21 & RDA Full Lab</title>
    <script src="https://cdn.jsdelivr.net"></script>
    <style>
        :root { 
            --primary: #2563eb; --secondary: #64748b; 
            --success: #16a34a; --bg: #f1f5f9; 
            --card-bg: #ffffff; --text: #1e293b;
        }
        body { font-family: 'Segoe UI', system-ui, Tahoma; background: var(--bg); color: var(--text); line-height: 1.6; padding: 20px; }
        .container { max-width: 1200px; margin: auto; }
        
        /* Header */
        .header { text-align: center; margin-bottom: 30px; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
        .training-modes { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-bottom: 25px; }
        
        /* Buttons */
        .btn-mode { padding: 10px 20px; border: 2px solid var(--primary); background: transparent; color: var(--primary); border-radius: 12px; cursor: pointer; font-weight: 600; transition: 0.3s; }
        .btn-mode:hover { background: var(--primary); color: white; }
        .btn-clear { border-color: #ef4444; color: #ef4444; }
        .btn-clear:hover { background: #ef4444; color: white; }

        /* Grid & Cards */
        .marc-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; }
        .card { background: var(--card-bg); padding: 20px; border-radius: 15px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); border: 1px solid #e2e8f0; display: flex; flex-direction: column; }
        .card-title { background: #f8fafc; margin: -20px -20px 15px -20px; padding: 12px 20px; border-radius: 15px 15px 0 0; font-size: 0.95rem; font-weight: bold; color: var(--primary); border-bottom: 1px solid #e2e8f0; }

        /* Form */
        .field-row { margin-bottom: 15px; }
        label { display: block; font-size: 0.85rem; margin-bottom: 5px; font-weight: 600; color: var(--secondary); }
        input { width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 8px; box-sizing: border-box; transition: 0.2s; }
        input:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 0 3px rgba(37,99,235,0.1); }
        .tag-num { background: #dbeafe; color: #1e40af; padding: 2px 6px; border-radius: 4px; font-family: monospace; margin-left: 5px; }
        
        /* Footer Actions */
        .actions { text-align: center; margin: 30px 0; display: flex; justify-content: center; gap: 15px; }
        .btn-main { padding: 14px 40px; border: none; border-radius: 12px; color: white; cursor: pointer; font-weight: bold; font-size: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }

        /* Output Terminal */
        .output-container { background: #0f172a; color: #38bdf8; padding: 25px; border-radius: 15px; font-family: 'Consolas', monospace; border: 4px solid #1e293b; }
        .output-header { color: #94a3b8; font-size: 0.85rem; margin-bottom: 10px; border-bottom: 1px solid #1e293b; display: flex; justify-content: space-between; }
        pre { margin: 0; white-space: pre-wrap; font-size: 1rem; line-height: 1.5; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>ğŸ“š Ù…Ù†ØµØ© Ø¹Ù…Ø§Ø¯ ÙƒØ§Ø¸Ù… Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù„Ù„ÙÙ‡Ø±Ø³Ø©</h1>
        <p>Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„: MARC21 + Ù‚ÙˆØ§Ø¹Ø¯ RDA + Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</p>
    </div>

    <div class="training-modes">
        <button class="btn-mode" onclick="loadSample('book')">ğŸ“– ÙƒØªØ§Ø¨ ÙˆØ³Ù„Ø³Ù„Ø©</button>
        <button class="btn-mode" onclick="loadSample('thesis')">ğŸ“ Ø£Ø·Ø±ÙˆØ­Ø© Ø±Ù‚Ù…ÙŠØ©</button>
        <button class="btn-mode" onclick="loadSample('electronic')">ğŸŒ Ù…ÙˆØ±Ø¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (URL)</button>
        <button class="btn-mode btn-clear" onclick="clearForm()">ğŸ§¹ ØªÙØ±ÙŠØº Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</button>
    </div>

    <form id="marcForm">
        <div class="marc-grid">
            <!-- 1. Ø§Ù„ØªØ±Ù‚ÙŠÙ… ÙˆØ§Ù„ØªØµÙ†ÙŠÙ -->
            <div class="card">
                <div class="card-title">Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªÙ‚Ù†ÙŠÙ† ÙˆØ§Ù„ØªØµÙ†ÙŠÙ (0xx)</div>
                <div class="field-row" data-tag="020">
                    <label><span class="tag-num">020</span> Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø¹ÙŠØ§Ø±ÙŠ ISBN</label>
                    <input placeholder="Ù…Ø«Ø§Ù„: 9789921712001">
                </div>
                <div class="field-row" data-tag="082">
                    <label><span class="tag-num">082</span> ØªØµÙ†ÙŠÙ Ø¯ÙŠÙˆÙŠ Ø§Ù„Ø¹Ø´Ø±ÙŠ</label>
                    <input placeholder="Ù…Ø«Ø§Ù„: 025.3">
                </div>
                <div class="field-row" data-tag="050">
                    <label><span class="tag-num">050</span> ØªØµÙ†ÙŠÙ Ù…ÙƒØªØ¨Ø© Ø§Ù„ÙƒÙˆÙ†Ø¬Ø±Ø³</label>
                    <input placeholder="Ù…Ø«Ø§Ù„: Z663.12 .C65">
                </div>
            </div>

            <!-- 2. Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆØ§Ù„Ø³Ù„Ø§Ø³Ù„ -->
            <div class="card">
                <div class="card-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ø³Ù„Ø³Ù„Ø© (2xx-4xx)</div>
                <div class="field-row" data-tag="100">
                    <label><span class="tag-num">100</span> Ø§Ù„Ù…Ø¤Ù„Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</label>
                    <input placeholder="Ø§Ù„Ù„Ù‚Ø¨ØŒ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„">
                </div>
                <div class="field-row" data-tag="245">
                    <label><span class="tag-num">245</span> Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</label>
                    <input placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† : Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ±Ø¹ÙŠ / Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©">
                </div>
                <div class="field-row" data-tag="490">
                    <label><span class="tag-num">490</span> Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ù„Ø³Ù„Ø© (Series)</label>
                    <input placeholder="Ø§Ø³Ù… Ø§Ù„Ø³Ù„Ø³Ù„Ø© Ø› Ø±Ù‚Ù… Ø§Ù„Ø¹Ø¯Ø¯">
                </div>
            </div>

            <!-- 3. Ø§Ù„ÙˆØµÙ Ø§Ù„Ù…Ø§Ø¯ÙŠ RDA -->
            <div class="card">
                <div class="card-title">Ø§Ù„ÙˆØµÙ Ø§Ù„Ù…Ø§Ø¯ÙŠ RDA (3xx)</div>
                <div class="field-row" data-tag="300">
                    <label><span class="tag-num">300</span> Ø§Ù„ÙˆØµÙ Ø§Ù„Ù…Ø§Ø¯ÙŠ</label>
                    <input placeholder="ØµØŒ Ø³Ù…">
                </div>
                <div class="field-row" data-tag="336">
                    <label><span class="tag-num">336</span> Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ (Content)</label>
                    <input value="Ù†Øµ (text)">
                </div>
                <div class="field-row" data-tag="337">
                    <label><span class="tag-num">337</span> Ù†ÙˆØ¹ Ø§Ù„ÙˆØ³ÙŠØ· (Media)</label>
                    <input value="ØºÙŠØ± Ù…Ø²ÙˆØ¯ Ø¨Ø¬Ù‡Ø§Ø² (unmediated)">
                </div>
                <div class="field-row" data-tag="338">
                    <label><span class="tag-num">338</span> Ù†ÙˆØ¹ Ø§Ù„Ù†Ø§Ù‚Ù„ (Carrier)</label>
                    <input value="Ù…Ø¬Ù„Ø¯ (volume)">
                </div>
            </div>

            <!-- 4. Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ§Ù„Ø±ÙˆØ§Ø¨Ø· -->
            <div class="card">
                <div class="card-title">Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø±Ù‚Ù…ÙŠ (5xx-8xx)</div>
                <div class="field-row" data-tag="500">
                    <label><span class="tag-num">500</span> Ù…Ù„Ø§Ø­Ø¸Ø© Ø¹Ø§Ù…Ø©</label>
                    <input placeholder="Ù…Ø«Ø§Ù„: ÙŠØ´ØªÙ…Ù„ Ø¹Ù„Ù‰ ÙƒØ´Ø§ÙØ§Øª ÙˆØ¨Ø¨Ù„ÙŠÙˆØ¬Ø±Ø§ÙÙŠØ©">
                </div>
                <div class="field-row" data-tag="502">
                    <label><span class="tag-num">502</span> Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø£Ø·Ø±ÙˆØ­Ø©</label>
                    <input placeholder="Ø±Ø³Ø§Ù„Ø© Ù…Ø§Ø¬Ø³ØªÙŠØ± - Ø¬Ø§Ù…Ø¹Ø©...">
                </div>
                <div class="field-row" data-tag="856">
                    <label><span class="tag-num">856</span> Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (URL)</label>
                    <input placeholder="http://www.example.com/book.pdf" style="direction: ltr;">
                </div>
                <div class="field-row" data-tag="650">
                    <label><span class="tag-num">650</span> Ø±Ø£Ø³ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹</label>
                    <input>
                </div>
            </div>
        </div>
    </form>

    <div class="actions">
        <button onclick="updateDisplay()" class="btn-main" style="background:var(--primary)">ğŸ”„ ØªÙˆÙ„ÙŠØ¯ Ø³Ø¬Ù„ Ù…Ø§Ø±Ùƒ</button>
        <button onclick="exportExcel()" class="btn-main" style="background:var(--success)">ğŸ“Š Ø­ÙØ¸ ÙƒÙ…Ù„Ù Excel</button>
    </div>

    <div class="output-container">
        <div class="output-header">
            <span>MARC21 / RDA RECORD VIEW</span>
            <span id="copyFeedback" style="color: #4ade80;"></span>
        </div>
        <pre id="marcDisplay">LDR 00000nam a2200000 i 4500</pre>
    </div>
</div>

<script>
    function updateDisplay() {
        let text = "LDR 00000nam a2200000 i 4500\n";
        document.querySelectorAll('.field-row').forEach(row => {
            const tag = row.dataset.tag;
            const val = row.querySelector('input').value;
            if(val) {
                let ind1 = "#", ind2 = "#";
                // ØªØ¹ÙŠÙŠÙ† Ù…Ø¤Ø´Ø±Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù„Ù„ØªØ¹Ù„Ù…
                if(tag === "100") { ind1 = "1"; }
                if(tag === "245") { ind1 = "1"; ind2 = "0"; }
                if(tag === "082") { ind1 = "0"; ind2 = "4"; }
                if(tag === "490") { ind1 = "0"; }
                if(tag === "856") { ind1 = "4"; ind2 = "0"; }
                
                text += `${tag} ${ind1}${ind2} $a ${val}\n`;
            }
        });
        document.getElementById('marcDisplay').innerText = text;
    }

    function loadSample(type) {
        clearForm();
        const samples = {
            book: {
                "020": "978-603-01-1234-5", "082": "025.3", "100": "Ø§Ù„Ø®Ù„ÙØŒ ØµØ§Ù„Ø­",
                "245": "ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„ÙÙ‡Ø±Ø³Ø© Ø§Ù„Ø­Ø¯ÙŠØ«Ø©", "490": "Ø³Ù„Ø³Ù„Ø© Ø¹Ù„ÙˆÙ… Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø› 12",
                "300": "250 Øµ Ø› 24 Ø³Ù…", "336": "Ù†Øµ (text)", "337": "ØºÙŠØ± Ù…Ø²ÙˆØ¯ Ø¨Ø¬Ù‡Ø§Ø² (unmediated)", "338": "Ù…Ø¬Ù„Ø¯ (volume)",
                "500": "ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ù„Ø­Ù‚Ø§Øª ØªØ¯Ø±ÙŠØ¨ÙŠØ©."
            },
            thesis: {
                "100": "Ø­Ù…Ø¯ØŒ Ø³Ø§Ø±Ø©", "245": "Ø§Ù„ÙÙ‡Ø±Ø³Ø© Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ÙŠØ© ÙÙŠ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©", "502": "Ø£Ø·Ø±ÙˆØ­Ø© Ø¯ÙƒØªÙˆØ±Ø§Ù‡ - Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ù…Ù„Ùƒ Ø³Ø¹ÙˆØ¯",
                "300": "410 ÙˆØ±Ù‚Ø© Ø› 30 Ø³Ù…", "856": "https://repository.ksu.edu.sa", "650": "Ø§Ù„ÙÙ‡Ø±Ø³Ø© Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹ÙŠØ©"
            },
            electronic: {
                "245": "Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù†Ø§Ø´Ø±ÙŠÙ† Ø§Ù„Ø¹Ø±Ø¨ [Ù…ÙˆØ±Ø¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ]", "336": "Ù†Øµ (text)", "337": "ÙƒÙ…Ø¨ÙŠÙˆØªØ± (computer)", 
                "338": "Ù…ÙˆØ±Ø¯ Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª (online resource)", "856": "http://www.arab-publishers.org",
                "500": "ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø§Ø¨Ø· Ø¯ÙˆØ±ÙŠØ§Ù‹."
            }
        };
        const data = samples[type];
        Object.keys(data).forEach(tag => {
            const el = document.querySelector(`[data-tag="${tag}"] input`);
            if(el) el.value = data[tag];
        });
        updateDisplay();
    }

    function clearForm() {
        document.querySelectorAll('input').forEach(i => {
            if(!["336","337","338"].includes(i.closest('.field-row').dataset.tag)) i.value = '';
        });
        updateDisplay();
    }

    function exportExcel() {
        let rows = [["Ø§Ù„Ø­Ù‚Ù„ (Tag)", "Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª", "Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Subfield $a)"]];
        document.querySelectorAll('.field-row').forEach(row => {
            const val = row.querySelector('input').value;
            if(val) rows.push([row.dataset.tag, "##", val]);
        });
        const ws = XLSX.utils.aoa_to_sheet(rows);
        const wb = XLSX.utils.book_new();
        XLSX.utils.book_append_sheet(wb, ws, "MARC_RDA");
        XLSX.writeFile(wb, "Emad_Kazem_Full_Record.xlsx");
    }
</script>

</body>
</html>
